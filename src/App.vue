<!--
 * @Author: yangyuan
 * @Date: 2020-04-14 21:26:49
 * @Email: 1367511704@qq.com
 * @LastEditTime: 2020-04-27 13:51:21
 * @Description: 
 -->
<template>
    <div id="app">
        <Layout></Layout>
    </div>
</template>

<script>
import Layout from "@/components/Layout";
import utils from "@/widget/utils";
import store from "@/widget/store";
import * as Model from "@/model/static";
export default {
    name: "app",
    components: {
        Layout
    },
    methods: {
        getLizardCode() {
            const cacheTimes = 30 * 24 * 60 * 60 * 1000;
            Model.getLizardCode({
                type: "GET",
                dataType: "text",
                cache: true,
                expires: cacheTimes
            }).then(res => {
                if (res && typeof res == "string") {
                    if (utils.isLocalStorageSupported()) {
                        if ((!store.get("/activity-static/lizard/index.js"), "local")) {
                            let result = {
                                times: new Date().getTime() + cacheTimes,
                                results: res
                            };
                            store.set("/activity-static/lizard/index.js", result, "local");
                        }
                    }
                }
            });
        }
    },
    mounted() {
        this.getLizardCode();
        if(window.localStorage.getItem("authorization")){
            this.$store.state.loginStore.isOpenLogin = false;
        }
        else
        {
            this.$store.state.loginStore.isOpenLogin = true;
        }
    }
};
</script>

<style lang="less">
@import "./style/reset.less";
@import "./style/main.less";
@import "./style/icon-font/iconfont.css";
@import "./style/utils.css";
@import "./style/ui-method.less";
</style>
